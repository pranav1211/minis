<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="MINIS by BeyondMeBtw - Short-form writing, quick thoughts, updates, and ideas."><meta name="author" content="Beyond Me Btw"><title>Minis | BeyondMeBtw</title><link rel="icon" type="image/x-icon" href="https://beyondmebtw.com/assets/images/minis.ico"><link href="https://fonts.googleapis.com/css2?family=Kreon:wght@400;500;600;700&family=Mogra&display=swap" rel="stylesheet"><meta property="og:title" content="Minis | BeyondMeBtw"><meta property="og:type" content="website"><meta property="og:description" content="MINIS by BeyondMeBtw - Short-form writing, quick thoughts, updates, and ideas."><meta property="og:url" content="https://minis.beyondmebtw.com"><meta property="og:site_name" content="Minis by Beyond Me Btw"><link rel="stylesheet" href="/_astro/index.DHEC3jn4.css"></head> <body>  <div class="header-container"> <h1 class="page-title"> <a href="https://minis.beyondmebtw.com" class="minis">MINIS</a> <span class="by">by</span> <span class="brand"><a href="https://beyondmebtw.com">Beyond Me Btw</a></span> </h1> </div> <div class="main-container"> <aside class="left-sidebar"> <div class="about-section"> <h2>What is Minis?</h2> <p><strong>MINIS</strong> is my space for short posts like quick thoughts, updates, and ideas that don't need a full blog. It's a casual way to share more often, without writing long essays.</p> </div> </aside> <div class="content-section"> <div id="activeFilter" class="active-filter" style="display:none;"> <span id="filterLabel"></span> <button class="clear-filter" id="clearFilter">Clear</button> </div> <div id="postsContainer"></div> <div class="loading-container" id="loadingContainer"> <div class="loading-spinner" id="loadingSpinner"></div> <button class="load-more-btn" id="loadMoreBtn" style="display:none;">Load More</button> <div class="no-results" id="noResults" style="display:none;"> <h3>No minis found</h3> <p>Check back soon for new content!</p> </div> </div> </div> <aside class="right-sidebar"> <div class="search-section"> <input type="text" id="searchInput" placeholder="Search minis..." class="search-input"> </div> <div class="tag-cloud-section"> <h3>Tags</h3> <div class="tag-cloud" id="tagCloud"></div> </div> <div class="featured-categories-section" id="featuredCategories" style="display:none;"> <h3>Featured</h3> <div class="featured-list" id="featuredList"></div> </div> </aside> </div> <div class="footer"> <div>
&copy; 2022-Present. Beyond Me Btw created by <a href="https://beyondmebtw.com/about" style="color: inherit; font-weight: bold;" target="_blank">Pranav Veeraghanta.</a> </div> </div>  </body></html> <script>
(function() {
    var METADATA_URL = 'https://minis.beyondmebtw.com/content/metadata.json';
    var FEATURED_URL = '/data/featured_categories.json';
    var POSTS_PER_PAGE = 5;

    var allPosts = [];
    var filteredPosts = [];
    var displayedCount = 0;
    var activeTag = null;
    var searchQuery = '';

    var postsContainer = document.getElementById('postsContainer');
    var loadingSpinner = document.getElementById('loadingSpinner');
    var loadMoreBtn = document.getElementById('loadMoreBtn');
    var noResults = document.getElementById('noResults');
    var searchInput = document.getElementById('searchInput');
    var activeFilterEl = document.getElementById('activeFilter');
    var filterLabel = document.getElementById('filterLabel');
    var clearFilter = document.getElementById('clearFilter');

    // --- Init ---
    async function init() {
        await loadMetadata();
        buildTagCloud();
        loadFeaturedCategories();
        readUrlParams();
        applyFilters();
        renderPosts();
        setupSearch();
        setupTagCloud();
        setupClearFilter();
        setupInfiniteScroll();
    }

    async function loadMetadata() {
        try {
            var res = await fetch(METADATA_URL);
            if (!res.ok) throw new Error('Failed to fetch metadata');
            allPosts = await res.json();
        } catch (err) {
            console.error('Error loading metadata:', err);
            try {
                var res2 = await fetch('/content/metadata.json');
                if (res2.ok) allPosts = await res2.json();
            } catch (e) { /* ignore */ }
        }
        loadingSpinner.style.display = 'none';
    }

    // --- Runtime Tag Cloud ---
    function buildTagCloud() {
        var tagCounts = {};
        allPosts.forEach(function(p) {
            (p.tags || []).forEach(function(t) {
                tagCounts[t] = (tagCounts[t] || 0) + 1;
            });
        });

        var sorted = Object.entries(tagCounts).sort(function(a, b) { return b[1] - a[1]; });
        var container = document.getElementById('tagCloud');
        if (!container) return;

        container.innerHTML = '';

        if (sorted.length === 0) {
            container.closest('.tag-cloud-section').style.display = 'none';
            return;
        }

        sorted.forEach(function(entry, i) {
            var btn = document.createElement('button');
            btn.className = 'tag-cloud-item' + (i >= 3 ? ' tag-overflow' : '');
            btn.setAttribute('data-tag', entry[0]);
            btn.innerHTML = escapeHtml(entry[0]) + ' <span class="tag-count">(' + entry[1] + ')</span>';
            container.appendChild(btn);
        });

        // Mobile toggle for tags (shows top 3, rest hidden on mobile)
        if (sorted.length > 3) {
            var section = container.closest('.tag-cloud-section');
            var toggle = document.createElement('button');
            toggle.className = 'tag-toggle';
            toggle.textContent = 'Show all tags (' + sorted.length + ')';
            toggle.addEventListener('click', function() {
                container.classList.toggle('expanded');
                if (container.classList.contains('expanded')) {
                    toggle.textContent = 'Show less';
                } else {
                    toggle.textContent = 'Show all tags (' + sorted.length + ')';
                }
            });
            section.appendChild(toggle);
        }
    }

    // --- Featured Categories ---
    async function loadFeaturedCategories() {
        try {
            var res = await fetch(FEATURED_URL);
            if (!res.ok) return;
            var categories = await res.json();
            if (!categories || categories.length === 0) return;

            var section = document.getElementById('featuredCategories');
            var list = document.getElementById('featuredList');
            if (!section || !list) return;

            list.innerHTML = '';
            categories.forEach(function(cat) {
                var item = document.createElement('a');
                item.className = 'featured-category-item';
                item.href = '/?tag=' + encodeURIComponent(cat.tag);
                item.textContent = cat.name;
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    setTagFilter(cat.tag);
                });
                list.appendChild(item);
            });

            section.style.display = 'block';
        } catch (e) {
            // Featured categories file missing - section stays hidden
        }
    }

    function readUrlParams() {
        var params = new URLSearchParams(window.location.search);
        if (params.has('tag')) {
            activeTag = params.get('tag');
            var tagBtn = document.querySelector('.tag-cloud-item[data-tag="' + activeTag + '"]');
            if (tagBtn) tagBtn.classList.add('active');
        }
        if (params.has('q')) {
            searchQuery = params.get('q');
            if (searchInput) searchInput.value = searchQuery;
        }
    }

    // --- Filtering ---
    function applyFilters() {
        filteredPosts = allPosts;

        if (activeTag) {
            filteredPosts = filteredPosts.filter(function(p) {
                return (p.tags || []).indexOf(activeTag) !== -1;
            });
        }

        if (searchQuery) {
            var q = searchQuery.toLowerCase();
            filteredPosts = filteredPosts.filter(function(p) {
                return p.title.toLowerCase().indexOf(q) !== -1 ||
                    (p.rawMarkdown || '').toLowerCase().indexOf(q) !== -1;
            });
        }

        displayedCount = 0;
        postsContainer.innerHTML = '';
        updateFilterBanner();
    }

    function updateFilterBanner() {
        if (activeTag || searchQuery) {
            activeFilterEl.style.display = 'flex';
            var parts = [];
            if (activeTag) parts.push('Tag: ' + activeTag);
            if (searchQuery) parts.push('Search: "' + searchQuery + '"');
            filterLabel.textContent = parts.join(' | ');
        } else {
            activeFilterEl.style.display = 'none';
        }
    }

    function updateUrl() {
        var params = new URLSearchParams();
        if (activeTag) params.set('tag', activeTag);
        if (searchQuery) params.set('q', searchQuery);
        var qs = params.toString();
        var newUrl = qs ? window.location.pathname + '?' + qs : window.location.pathname;
        history.pushState(null, '', newUrl);
    }

    // --- Rendering ---
    function renderPosts() {
        var start = displayedCount;
        var end = Math.min(start + POSTS_PER_PAGE, filteredPosts.length);

        if (filteredPosts.length === 0) {
            noResults.style.display = 'block';
            loadMoreBtn.style.display = 'none';
            return;
        }

        noResults.style.display = 'none';

        var prevDate = start > 0 ? filteredPosts[start - 1].date : null;

        for (var i = start; i < end; i++) {
            var post = filteredPosts[i];
            var isSameDate = post.date === prevDate;

            var container = document.createElement('div');
            container.className = 'mini-post-container' + (isSameDate ? ' same-date' : '');
            container.setAttribute('data-tags', (post.tags || []).join(','));

            var dateStr = new Date(post.date).toLocaleDateString('en-US', {
                year: 'numeric', month: 'long', day: 'numeric'
            });

            var tagsHtml = (post.tags || []).map(function(t) {
                return '<span class="tag" data-tag="' + escapeHtml(t) + '">' + escapeHtml(t) + '</span>';
            }).join('');

            container.innerHTML =
                (!isSameDate ? '<div class="date-tab">' + dateStr + '</div>' : '') +
                '<div class="mini-post">' +
                    '<h2 class="mini-post-title">' +
                        '<a href="/post/' + post.id + '">' + escapeHtml(post.title) + '</a>' +
                    '</h2>' +
                    '<div class="mini-post-content">' + (post.content || '') + '</div>' +
                    '<div class="mini-post-meta">' +
                        '<span class="time-tag">' + post.time + ' IST</span>' +
                        tagsHtml +
                    '</div>' +
                '</div>';

            postsContainer.appendChild(container);

            if (i < end - 1) {
                var divider = document.createElement('div');
                divider.className = 'post-divider' + (isSameDate ? ' reduced' : '');
                postsContainer.appendChild(divider);
            }

            prevDate = post.date;
        }

        displayedCount = end;

        // Attach click handlers to inline tags
        var tagEls = postsContainer.querySelectorAll('.mini-post-meta .tag');
        tagEls.forEach(function(tagEl) {
            tagEl.style.cursor = 'pointer';
            tagEl.addEventListener('click', function() {
                setTagFilter(this.getAttribute('data-tag'));
            });
        });

        if (displayedCount < filteredPosts.length) {
            loadMoreBtn.style.display = 'block';
        } else {
            loadMoreBtn.style.display = 'none';
        }
    }

    // --- Search ---
    function setupSearch() {
        if (!searchInput) return;
        var debounceTimer;
        searchInput.addEventListener('input', function() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(function() {
                searchQuery = searchInput.value.trim();
                updateUrl();
                applyFilters();
                renderPosts();
            }, 300);
        });
    }

    // --- Tag Cloud ---
    function setupTagCloud() {
        document.querySelectorAll('.tag-cloud-item').forEach(function(btn) {
            btn.addEventListener('click', function() {
                var tag = this.getAttribute('data-tag');
                if (activeTag === tag) {
                    setTagFilter(null);
                } else {
                    setTagFilter(tag);
                }
            });
        });
    }

    function setTagFilter(tag) {
        activeTag = tag;
        document.querySelectorAll('.tag-cloud-item').forEach(function(btn) {
            if (btn.getAttribute('data-tag') === activeTag) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });
        updateUrl();
        applyFilters();
        renderPosts();
    }

    // --- Clear Filter ---
    function setupClearFilter() {
        clearFilter.addEventListener('click', function() {
            activeTag = null;
            searchQuery = '';
            if (searchInput) searchInput.value = '';
            document.querySelectorAll('.tag-cloud-item').forEach(function(btn) {
                btn.classList.remove('active');
            });
            updateUrl();
            applyFilters();
            renderPosts();
        });
    }

    // --- Infinite Scroll ---
    function setupInfiniteScroll() {
        loadMoreBtn.addEventListener('click', function() { renderPosts(); });

        var observer = new IntersectionObserver(function(entries) {
            if (entries[0].isIntersecting && displayedCount < filteredPosts.length) {
                renderPosts();
            }
        }, { rootMargin: '200px' });

        observer.observe(document.getElementById('loadingContainer'));
    }

    // --- Helpers ---
    function escapeHtml(str) {
        var div = document.createElement('div');
        div.textContent = str;
        return div.innerHTML;
    }

    // Start
    init();
})();
</script>